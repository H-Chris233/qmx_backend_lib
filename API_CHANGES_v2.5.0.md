# QMX Backend Library v2.5.0 å˜æ›´è¯´æ˜

## æ¦‚è¿°

v2.5.0 æ˜¯ä¸€ä¸ªé‡è¦çš„æ›´æ–°ç‰ˆæœ¬ï¼Œä¸»è¦é’ˆå¯¹å¹´é¾„å­—æ®µè¿›è¡Œäº†é‡æ„ï¼Œä½¿å…¶æ”¯æŒå¯ç©ºå€¼ã€‚æ­¤å˜æ›´æé«˜äº†æ•°æ®æ¨¡å‹çš„å‡†ç¡®æ€§å¹¶æ›´å¥½åœ°åæ˜ äº†ä¸šåŠ¡éœ€æ±‚ã€‚

---

## ğŸ”§ ç ´åæ€§å˜æ›´

### Student.age å­—æ®µç±»å‹å˜æ›´

**å˜æ›´å†…å®¹ï¼š** `Student.age` å­—æ®µä» `u8` ç±»å‹æ›´æ”¹ä¸º `Option<u8>` ç±»å‹

**å˜æ›´åŸå› ï¼š** 
- æ›´å¥½åœ°è¡¨ç¤º"æœªçŸ¥å¹´é¾„"æˆ–"æœªæä¾›å¹´é¾„"çš„çŠ¶æ€
- é¿å…ä½¿ç”¨ç‰¹æ®Šå€¼ï¼ˆå¦‚0ï¼‰æ¥è¡¨ç¤ºæ— æ„ä¹‰çš„ä¸šåŠ¡çŠ¶æ€
- æé«˜æ•°æ®æ¨¡å‹çš„å‡†ç¡®æ€§å’Œä»£ç çš„å¯è¯»æ€§

**è¿ç§»å½±å“ï¼š**
æ‰€æœ‰ç›´æ¥ä½¿ç”¨ `Student.age()` æ–¹æ³•çš„åœ°æ–¹éƒ½éœ€è¦æ›´æ–°ï¼Œå› ä¸ºè¿”å›ç±»å‹ä» `u8` å˜æ›´ä¸º `Option<u8>`ã€‚

**è¿ç§»ç¤ºä¾‹ï¼š**

```rust
// æ—§ä»£ç  (v2.4.1 åŠä¹‹å‰)
let student = Student::new();
student.set_age(18);
let age: u8 = student.age();  // ç›´æ¥è¿”å› u8 å€¼

// æ–°ä»£ç  (v2.5.0+)
let student = Student::new();
student.set_age(Some(18));    // è®¾ç½®å¹´é¾„æ—¶éœ€è¦åŒ…è£…åœ¨ Some ä¸­
let age: Option<u8> = student.age();  // è¿”å› Option<u8>

// å¦‚æœéœ€è¦è·å–å…·ä½“çš„å¹´é¾„å€¼ï¼Œéœ€è¦å¤„ç† Option
if let Some(age_value) = student.age() {
    println!("å­¦ç”Ÿå¹´é¾„: {}", age_value);
} else {
    println!("å­¦ç”Ÿå¹´é¾„æœªçŸ¥");
}
```

### StudentBuilder å’Œ StudentUpdater API å˜æ›´

**å˜æ›´å†…å®¹ï¼š** 
- `StudentBuilder::new(name, age)` çš„ç­¾åä» `new(name: impl Into<String>, age: Option<u8>)` æ›´æ”¹ä¸º `new(name: impl Into<String>)`
- æ–°å¢ `StudentBuilder::age(age: u8)` æ–¹æ³•ç”¨äºé“¾å¼è®¾ç½®å¹´é¾„
- `StudentUpdater::age(age)` çš„å‚æ•°ä» `u8` æ›´æ”¹ä¸º `Option<u8>`

**å˜æ›´åŸå› ï¼š**
- ç»Ÿä¸€APIè®¾è®¡æ¨¡å¼ï¼Œä½¿æ‰€æœ‰å­—æ®µéƒ½é€šè¿‡é“¾å¼è°ƒç”¨æ–¹å¼è®¾ç½®
- æé«˜APIçš„ä¸€è‡´æ€§å’Œæ˜“ç”¨æ€§
- é¿å…æ„é€ å‡½æ•°å‚æ•°åˆ—è¡¨è¿‡é•¿

**è¿ç§»ç¤ºä¾‹ï¼š**

```rust
// æ—§ä»£ç  (v2.4.1 åŠä¹‹å‰)
let builder = StudentBuilder::new("å¼ ä¸‰", Some(18));
let updater = StudentUpdater::new().age(19);

// æ–°ä»£ç  (v2.5.0+)
let builder = StudentBuilder::new("å¼ ä¸‰").age(18);  // è®¾ç½®å…·ä½“å¹´é¾„
let builder = StudentBuilder::new("æå››");          // ä¸è®¾ç½®å¹´é¾„ï¼ˆä¿æŒNoneï¼‰
let updater = StudentUpdater::new().age(Some(19));  // è®¾ç½®å…·ä½“å¹´é¾„
let updater = StudentUpdater::new().age(None);      // æ¸…é™¤å¹´é¾„ä¿¡æ¯
```

### Student::set_age æ–¹æ³•å˜æ›´

**å˜æ›´å†…å®¹ï¼š** `Student::set_age(age)` çš„å‚æ•°ä» `u8` æ›´æ”¹ä¸º `Option<u8>`

**è¿ç§»ç¤ºä¾‹ï¼š**

```rust
// æ—§ä»£ç  (v2.4.1 åŠä¹‹å‰)
student.set_age(20);

// æ–°ä»£ç  (v2.5.0+)
student.set_age(Some(20));  // è®¾ç½®å…·ä½“å¹´é¾„
student.set_age(None);      // æ¸…é™¤å¹´é¾„ä¿¡æ¯
```

---

## ğŸ“š æ–‡æ¡£æ›´æ–°

æ‰€æœ‰ç›¸å…³çš„APIæ–‡æ¡£éƒ½å·²æ›´æ–°ä»¥åæ˜ è¿™äº›å˜æ›´ï¼š
- `API_v1.md` - æ›´æ–°äº†Studentç»“æ„ä½“å®šä¹‰å’Œæ–¹æ³•ç­¾å
- `API_v2.md` - æ›´æ–°äº†StudentBuilderå’ŒStudentUpdaterçš„APIè¯´æ˜åŠç¤ºä¾‹

---

## ğŸ§ª æµ‹è¯•æ›´æ–°

æ‰€æœ‰ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹éƒ½å·²æ›´æ–°ä»¥é€‚é…æ–°çš„APIï¼š
- `student_tests.rs` - æ›´æ–°äº†æ‰€æœ‰å¹´é¾„ç›¸å…³æµ‹è¯•
- `v2_api_tests.rs` - æ›´æ–°äº†V2 APIæµ‹è¯•ç”¨ä¾‹
- `v1_api_tests.rs` - æ›´æ–°äº†V1 APIæµ‹è¯•ç”¨ä¾‹
- `enhanced_tests.rs` - æ›´æ–°äº†å¢å¼ºæµ‹è¯•ç”¨ä¾‹
- `atomic_write_fix_tests.rs` - æ›´æ–°äº†åŸå­å†™å…¥æµ‹è¯•ç”¨ä¾‹

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

1. **è¿ç§»ç­–ç•¥ï¼š** å»ºè®®åœ¨ä»£ç ä¸­é€æ­¥æ›¿æ¢æ‰€æœ‰å¯¹å¹´é¾„å­—æ®µçš„ä½¿ç”¨ï¼Œç¡®ä¿æ­£ç¡®å¤„ç† `Option<u8>` ç±»å‹
2. **ç©ºå€¼å¤„ç†ï¼š** åœ¨ä¸šåŠ¡é€»è¾‘ä¸­æ˜ç¡®å¤„ç†å¹´é¾„æœªçŸ¥çš„æƒ…å†µ
3. **å‘åå…¼å®¹ï¼š** æ­¤å˜æ›´ä¸ºç ´åæ€§å˜æ›´ï¼Œéœ€è¦ç›¸åº”åœ°æ›´æ–°æ‰€æœ‰ä¾èµ–æ­¤åº“çš„ä»£ç 
4. **APIä¸€è‡´æ€§ï¼š** å»ºè®®ä½¿ç”¨æ–°çš„é“¾å¼è°ƒç”¨æ¨¡å¼è®¾ç½®æ‰€æœ‰å­¦ç”Ÿå±æ€§ï¼Œä»¥ä¿æŒä»£ç é£æ ¼çš„ä¸€è‡´æ€§
5. **å¯è¯»æ€§æå‡ï¼š** æ–°çš„APIæ¨¡å¼ä½¿ä»£ç æ›´å…·å¯è¯»æ€§ï¼Œæ¯ä¸ªå±æ€§çš„è®¾ç½®éƒ½æ¸…æ™°æ˜ç¡®

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼š2.5.0*  
*æœ€åæ›´æ–°ï¼š2025-09-20*